(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{414:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"存储介质信息消除工具项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#存储介质信息消除工具项目"}},[s._v("#")]),s._v(" 存储介质信息消除工具项目")]),s._v(" "),t("h2",{attrs:{id:"_1、项目运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、项目运行"}},[s._v("#")]),s._v(" 1、项目运行")]),s._v(" "),t("p",[s._v("在release文件夹下有三个环境版本，这里选择X86_64的环境")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/xiaose-code/Pictures@main/img/1699952498192.webp",alt:"1699952498192"}})]),s._v(" "),t("p",[s._v("先运行服务端（要先把测试用的U盘先插入连接到虚拟机）")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ./server_wipe "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/etc/conf/configure.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("运行客户端")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("./client_wipe "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/etc/conf/configure.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("功能一：显示系统信息")]),s._v(" "),t("p",[s._v("功能二：文件粉碎")]),s._v(" "),t("p",[s._v("功能三：痕迹清楚")]),s._v(" "),t("p",[s._v("功能四：磁盘清理")]),s._v(" "),t("h2",{attrs:{id:"_2、运行效果图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、运行效果图"}},[s._v("#")]),s._v(" 2、运行效果图")]),s._v(" "),t("h3",{attrs:{id:"未插入u盘时"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#未插入u盘时"}},[s._v("#")]),s._v(" 未插入U盘时")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/xiaose-code/Pictures@main/img/1700012394343.webp",alt:"1700012394343"}})]),s._v(" "),t("h3",{attrs:{id:"插入u盘时"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插入u盘时"}},[s._v("#")]),s._v(" 插入U盘时")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/xiaose-code/Pictures@main/img/1700029803063.webp",alt:"1700029803063"}})]),s._v(" "),t("blockquote",[t("p",[s._v("默认第一个页面是显示系统信息页面")])]),s._v(" "),t("p",[s._v("主界面的实现在"),t("code",[s._v("wid_main.h")]),s._v("和"),t("code",[s._v("wid_main.cpp")]),s._v("文件中的 "),t("code",[s._v("wid_main")]),s._v(" 的初始化信号槽部分。")]),s._v(" "),t("p",[s._v("它包括以下几个部分：")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("按钮颜色和状态控制：")]),s._v(" 使用 "),t("code",[s._v("keep_butt_col")]),s._v(" 函数保持按钮选中颜色，"),t("code",[s._v("into_sys_op")]),s._v(" 函数在点击左侧按钮时显示对应的操作界面，"),t("code",[s._v("get_show_wid")]),s._v(" 函数获取当前显示的操作界面。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("左侧按钮事件连接：")]),s._v(" 为左侧按钮连接对应事件主动发送的信号，以及左侧按钮点击事件的连接。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("操作按钮信号：")]),s._v(" 连接清理按钮、打开按钮、关于我们按钮和退出程序按钮的点击事件。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("最小化和关闭按钮：")]),s._v(" 连接最小化按钮和关闭按钮的点击事件。")])])]),s._v(" "),t("p",[s._v("这段代码主要是建立了各个按钮之间的关联关系，以及按钮和对应操作界面之间的连接。在用户点击按钮时，会触发相应的操作，例如打开文件选择对话框、清理文件等。")]),s._v(" "),t("blockquote",[t("p",[s._v("页面系统信息内容主要在"),t("code",[s._v("wid_sys_info.h")]),s._v("和"),t("code",[s._v("wid_sys_info.cpp")]),s._v("文件中")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/xiaose-code/Pictures@main/img/1700191336476.webp",alt:"1700191336476"}})]),s._v(" "),t("h3",{attrs:{id:"文件粉碎页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件粉碎页面"}},[s._v("#")]),s._v(" 文件粉碎页面")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/xiaose-code/Pictures@main/img/1700187559704.webp",alt:"1700187559704"}})]),s._v(" "),t("h3",{attrs:{id:"痕迹清除页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#痕迹清除页面"}},[s._v("#")]),s._v(" 痕迹清除页面")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/xiaose-code/Pictures@main/img/1700187729701.webp",alt:"1700187729701"}})]),s._v(" "),t("h3",{attrs:{id:"磁盘清理页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#磁盘清理页面"}},[s._v("#")]),s._v(" 磁盘清理页面")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/xiaose-code/Pictures@main/img/1700187850134.webp",alt:"1700187850134"}})]),s._v(" "),t("h3",{attrs:{id:"点击数据清除功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#点击数据清除功能"}},[s._v("#")]),s._v(" 点击数据清除功能")]),s._v(" "),t("p",[s._v("清除之前：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/xiaose-code/Pictures@main/img/1700187965126.webp",alt:"1700187965126"}})]),s._v(" "),t("p",[s._v("清除之后：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/xiaose-code/Pictures@main/img/1700188348876.webp",alt:"1700188348876"}})]),s._v(" "),t("h3",{attrs:{id:"点击打开文件功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#点击打开文件功能"}},[s._v("#")]),s._v(" 点击打开文件功能")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/xiaose-code/Pictures@main/img/1700188056128.webp",alt:"1700188056128"}})]),s._v(" "),t("h3",{attrs:{id:"点击关于我们"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#点击关于我们"}},[s._v("#")]),s._v(" 点击关于我们")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/xiaose-code/Pictures@main/img/1700188092864.webp",alt:"1700188092864"}})]),s._v(" "),t("p",[s._v("实际就是显示一张图片，省时间")]),s._v(" "),t("h2",{attrs:{id:"_3、每个文件实现的功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、每个文件实现的功能"}},[s._v("#")]),s._v(" 3、每个文件实现的功能")]),s._v(" "),t("h3",{attrs:{id:"files-wipe-h和files-wipe-cpp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#files-wipe-h和files-wipe-cpp"}},[s._v("#")]),s._v(" files_wipe.h和files_wipe.cpp")]),s._v(" "),t("p",[s._v("用于安全删除文件和目录内容，确保无法被恢复。以下是每个函数的功能总结：")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("构造函数和析构函数：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("files_wipe")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("files_wipe")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("构造函数分配一个用于文件覆盖的缓冲区，并初始化随机数生成器。")]),s._v(" "),t("li",[s._v("析构函数释放分配的内存。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("wipe_file 函数：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//粉碎文件操作")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//粉碎文件时参数:文件名,粉碎次数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//粉碎磁盘时参数:文件名,粉碎次数,false(非分件不删除),进度条回调,粉碎完成回调")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wipe_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string filename"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" num"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bool")]),s._v(" is_file "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                   \n               function"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" current"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" num"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" fn_prog "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("nullptr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 进度条回调函数")]),s._v("\n               function"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bool")]),s._v(" finish"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("__off_t off"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" fn_finish "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("nullptr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 粉碎完成回调函数")]),s._v("\n               __off_t off_continue "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 中断时的偏移量")]),s._v("\n               "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" num_continue "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 中断时的粉碎次数")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("wipe_dir 函数：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 粉碎文件夹及其子目录中的文件(回调可监控正在删除的文件)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wipe_dir")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string path_dir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" num"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n              function"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" fn_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("nullptr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("参数：\n"),t("ul",[t("li",[t("code",[s._v("path_dir")]),s._v(": 待覆盖的目录。")]),s._v(" "),t("li",[t("code",[s._v("num")]),s._v(": 覆盖的次数。")]),s._v(" "),t("li",[t("code",[s._v("fn_name")]),s._v(": 每个文件或目录的回调函数。")])])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("wipe_dir 函数（重载）：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 粉碎一组文件夹及其子目录中的文件(回调可监控正在删除的文件)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wipe_dir")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vector"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("string"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" vec_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" num"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n              function"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" fn_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("nullptr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("参数：\n"),t("ul",[t("li",[t("code",[s._v("vec_name")]),s._v(": 待覆盖的目录向量。")]),s._v(" "),t("li",[t("code",[s._v("num")]),s._v(": 覆盖的次数。")]),s._v(" "),t("li",[t("code",[s._v("fn_name")]),s._v(": 每个文件或目录的回调函数。")])])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("get_dir_file 函数：")])]),s._v(" "),t("div",{staticClass:"language-cpp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取目录下需要删除的所有文件与目录名称")]),s._v("\nvector"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("string"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get_dir_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string path_dir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("参数：\n"),t("ul",[t("li",[t("code",[s._v("path_dir")]),s._v(": 目录路径。")])])]),s._v(" "),t("li",[s._v("返回一个包含文件和子目录路径的字符串向量。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("get_err_vec 函数：")])]),s._v(" "),t("div",{staticClass:"language-cpp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取无法打开的文件")]),s._v("\nvector"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("string"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get_err_vec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("返回最近一次执行 "),t("code",[s._v("wipe_file")]),s._v(" 函数时出现的错误文件向量。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("set_skip 函数：")])]),s._v(" "),t("div",{staticClass:"language-cpp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//跳过并结束粉碎")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set_skip")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bool")]),s._v(" skip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("设置是否跳过执行。如果设置为跳过，下一次执行 "),t("code",[s._v("wipe_file")]),s._v(" 时将退出。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("set_flush_zero、set_flush_one、set_flush_letter 函数：")])]),s._v(" "),t("div",{staticClass:"language-cpp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//填充随机字节块内容")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set_flush_zero")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set_flush_one")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set_flush_letter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("分别用于设置缓冲区的内容为全零、全一、随机字母。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("is_exist_file 函数：")])]),s._v(" "),t("div",{staticClass:"language-cpp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//判断文件是否存在")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bool")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("is_exist_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"info-dev-h和info-dev-cpp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#info-dev-h和info-dev-cpp"}},[s._v("#")]),s._v(" info_dev.h和info_dev.cpp")]),s._v(" "),t("p",[s._v("用于获取和处理硬盘设备信息。以下是每个函数的功能总结：")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[t("code",[s._v("show_dev_info")]),s._v(" 函数：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("show_dev_info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dev_info info"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//查看结构体信息")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[t("strong",[t("code",[s._v("less_enter")]),s._v(" 函数：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("less_enter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("char")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("buf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//从字符尾部去除换行符号")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[t("strong",[t("code",[s._v("get_ctos")]),s._v(" 函数：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[s._v("string "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get_ctos")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dev_info info"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//格式转换 获取磁盘结构体信息")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[t("strong",[t("code",[s._v("get_info_fdisk")]),s._v(" 函数：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[s._v("vector"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dev_info"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get_info_fdisk")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//获取磁盘结构体信息")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("通过执行 "),t("code",[s._v("fdisk -l")]),s._v(" 命令获取系统中的硬盘设备信息。")]),s._v(" "),t("li",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/xiaose-code/Pictures@main/img/1700202851599.webp",alt:"1700202851599"}})]),s._v(" "),t("li",[s._v("返回一个包含硬盘设备信息结构体的向量。")])])]),s._v(" "),t("li",[t("p",[t("strong",[t("code",[s._v("to_vec_send")]),s._v(" 函数：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[s._v("vector"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("string"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("to_vec_send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" vector"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dev_info"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("vec_dev"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将硬盘设备信息结构体转换为网络传输格式的字符串向量。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"scan-files-h和scan-files-cpp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#scan-files-h和scan-files-cpp"}},[s._v("#")]),s._v(" scan_files.h和scan_files.cpp")]),s._v(" "),t("p",[s._v("这段代码定义了一个名为 "),t("code",[s._v("scan_files")]),s._v(" 的类，提供了一些功能来扫描目录、获取文件和目录信息，以及判断文件类型。以下是每个函数的功能总结：")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[t("code",[s._v("get_files")]),s._v(" 函数：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 递归的将路径下所有普通文件和目录放入容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bool")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get_files")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("vector"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("string"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("vec_files"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("vector"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("string"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("vec_dir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("参数1：扫描目录（绝对路径）。")]),s._v(" "),t("li",[s._v("参数2：存储文件路径的容器。")]),s._v(" "),t("li",[s._v("参数3：存储目录路径的容器。")])])]),s._v(" "),t("li",[t("p",[t("strong",[t("code",[s._v("get_tree_dir")]),s._v(" 函数：")])]),s._v(" "),t("div",{staticClass:"language-cpp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 对 get_tree 函数的简单调用，用于获取带层级的文件目录。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bool")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get_tree_dir")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("path_abs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("vector"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tree"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("vec_tree"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("参数1：扫描目录（绝对路径）。")]),s._v(" "),t("li",[s._v("参数2：存储文件和目录结构信息的容器。")])])]),s._v(" "),t("li",[t("p",[t("strong",[t("code",[s._v("get_tree")]),s._v(" 函数：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 递归获取带层级的文件目录，深度优先（获取当前层文件，然后进入子文件夹获取所有内容，再获取第二个子文件夹）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bool")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get_tree")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("abs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("rel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("vector"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tree"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("vec_tree"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" deep"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("参数1：扫描目录的绝对路径。")]),s._v(" "),t("li",[s._v("参数2：文件或目录名称。")]),s._v(" "),t("li",[s._v("参数3：存储文件和目录结构信息的容器。")]),s._v(" "),t("li",[s._v("参数4：递归深度。")])])]),s._v(" "),t("li",[t("p",[t("strong",[t("code",[s._v("is_dir")]),s._v(" 函数：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//判断目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bool")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("is_dir")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("参数：待判断的路径。")])])]),s._v(" "),t("li",[t("p",[t("strong",[t("code",[s._v("is_file")]),s._v(" 函数：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//判断普通文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bool")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("is_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("参数：待判断的路径。")])])])]),s._v(" "),t("h3",{attrs:{id:"web-connect-h和web-connect-cpp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#web-connect-h和web-connect-cpp"}},[s._v("#")]),s._v(" web_connect.h和web_connect.cpp")]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_open")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sock_unix "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("sock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//连接成功")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_message")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sock_unix "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("sock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("msg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//接收客户端")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("on_close")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sock_unix "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("sock"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//关闭连接")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send_message")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("msg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//发送消息到客户端")]),s._v("\nfunction"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" string "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" fn_message "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("nullptr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//向外发送消息--用于工作函数接收")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"work-main-h和work-main-cpp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#work-main-h和work-main-cpp"}},[s._v("#")]),s._v(" work_main.h和work_main.cpp")]),s._v(" "),t("p",[s._v("这段代码是 "),t("code",[s._v("work_main")]),s._v(" 类的实现部分。以下是每个函数的主要功能概述：")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("构造函数：")])]),s._v(" "),t("ul",[t("li",[s._v("初始化线程池对象 "),t("code",[s._v("_pool_th")]),s._v("，用于执行任务函数。")]),s._v(" "),t("li",[s._v("注册不同类型任务函数到 "),t("code",[s._v("_map_task")]),s._v(" 容器，使用宏 "),t("code",[s._v("ADD_MAP_TASK")]),s._v(" 简化注册过程。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("cb_message(string sjson)：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cb_message")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string msg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//接收客户端消息")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("通过解析传入的 JSON 字符串，提取出任务类型和任务内容。")]),s._v(" "),t("li",[s._v("根据任务类型查找 "),t("code",[s._v("_map_task")]),s._v(" 容器中注册的任务函数。")]),s._v(" "),t("li",[s._v("将任务函数和任务内容添加到线程池中异步执行。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("send_msg_th(string sjson)：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[s._v("function"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" fn_send_msg "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("nullptr")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//向外传递消息--用于发送信息到客户端")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("通过互斥锁确保在多线程环境中安全地发送消息。")]),s._v(" "),t("li",[s._v("调用注册的外部回调函数 "),t("code",[s._v("fn_send_msg")]),s._v(" 发送消息。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("task_ask_dev_back(string sjson)：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("task_ask_dev_back")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string sjson"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//磁盘设备信息反馈")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("获取磁盘信息，包括硬盘设备编号、用户重命名、硬盘容量、序列号等。")]),s._v(" "),t("li",[s._v("转换为网络传输格式，发送给客户端。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("task_ask_wipe_file(string sjson)：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("task_ask_wipe_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string sjson"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理请求粉碎文件")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("获取需要粉碎的文件数组和粉碎次数。")]),s._v(" "),t("li",[s._v("根据文件类型进行粉碎，包括单个文件和整个目录。")]),s._v(" "),t("li",[s._v("将粉碎结果（成功/失败的文件）和粉碎次数发送给客户端。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("task_ask_wipe_rule(string sjson)：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("task_ask_wipe_rule")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string sjson"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理请求粉碎规则")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("获取需要粉碎的文件数组和粉碎次数。")]),s._v(" "),t("li",[s._v("将目录展开成文件数组，然后进行粉碎操作。")]),s._v(" "),t("li",[s._v("将粉碎结果（成功/失败的文件）发送给客户端。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("task_ask_wipe_disk(string sjson)：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("task_ask_wipe_disk")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string sjson"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理请求磁盘清理")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("获取需要粉碎的磁盘数组、粉碎次数、是否为中断继续、中断时的当前粉碎次数和偏移量。")]),s._v(" "),t("li",[s._v("根据是否中断继续，启动或继续多个线程粉碎磁盘。")]),s._v(" "),t("li",[s._v("发送粉碎进度信息给客户端。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("task_ask_stop_disk(string sjson)：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("task_ask_stop_disk")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string sjson"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理停止磁盘清理")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("获取需要停止的磁盘名称，从 "),t("code",[s._v("_map_disk")]),s._v(" 中找到对应的粉碎操作，并设置停止标志。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("task_ask_ukey_back(string sjson)：")])]),s._v(" "),t("div",{staticClass:"language-CPP line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("task_ask_ukey_back")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string sjson"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理请求UKey权限")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("获取 UKey 权限信息，并发送给客户端。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("task_ask_close_back(string sjson)：")])]),s._v(" "),t("div",{staticClass:"language-cpp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("task_ask_close_back")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("string sjson"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("ul",[t("li",[s._v("处理请求关闭的任务函数，退出程序。")])])])}),[],!1,null,null,null);t.default=e.exports}}]);