(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{471:function(s,a,t){"use strict";t.r(a);var n=t(4),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"u-盘清除工具编译教程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#u-盘清除工具编译教程"}},[s._v("#")]),s._v(" U 盘清除工具编译教程")]),s._v(" "),a("p",[s._v("git 上面的项目地址")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone http://192.168.6.2/HQR/net_wipe.git\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("目录结构")]),s._v(" "),a("div",{staticClass:"language-pascal line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-pascal"}},[a("code",[s._v("net_wipe\n├── client_wipe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("客户端"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n│\t├── build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh\n│\t└── "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n├── conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("配置文件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n├── deb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("打包用的目录"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n├── make_shell\n├── passwd_ask\n├── "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v("\n├── README"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n├── release"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("编译号的可执行文件存放位置"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n├── run_shell\n├── server_wipe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("服务端"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n│\t├── build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh\n│\t└── "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n├── shell\n├── test\n└──\tthirdparty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("libhv第三方静态库"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("三个平台都已编译好"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t ├──libhv\n\t └──libhv_static\n        ├── aarch64\n        │   ├── libhv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so\n        │   └── libhv_static"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a\n        ├── mips64\n        │   ├── libhv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so\n        │   └── libhv_static"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a\n        └── x86_64\n            ├── libhv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so\n            └── libhv_static"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("h2",{attrs:{id:"_1-将-libhv-相关库拷贝至相关编译平台的目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-将-libhv-相关库拷贝至相关编译平台的目录"}},[s._v("#")]),s._v(" 1.将 libhv 相关库拷贝至相关编译平台的目录")]),s._v(" "),a("p",[a("code",[s._v("thirdparty/libhv_static")]),s._v(" 目录里面分别有三个平台目录，分别存放了对应的已编译好的 libhv 静态库和动态库")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把 aarch64 目录里的动静态库都复制到 ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" libhv.so /usr/aarch64-linux-gnu/lib\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" libhv_static.a /usr/aarch64-linux-gnu/lib\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把 x86_64 目录里的动静态库都复制到 ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" libhv.so /usr/lib\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" libhv_static.a /usr/lib\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把 mips64 目录里的动静态库都复制到 /usr/lib/gcc-cross/mips64el-linux-gnuabi64/5 目录里")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" libhv.so /usr/lib/gcc-cross/mips64el-linux-gnuabi64/5\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" libhv_static.a /usr/lib/gcc-cross/mips64el-linux-gnuabi64/5\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h2",{attrs:{id:"_2-编译客户端-client-wipe"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-编译客户端-client-wipe"}},[s._v("#")]),s._v(" 2.编译客户端 client_wipe")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在 client_wipe 目录下运行脚本 build.sh")]),s._v("\n./build.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"_3-编译服务端-server-wipe"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-编译服务端-server-wipe"}},[s._v("#")]),s._v(" 3.编译服务端 server_wipe")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在 client_wipe 目录下运行脚本 build.sh")]),s._v("\n./build.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"_4-本地运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-本地运行"}},[s._v("#")]),s._v(" 4.本地运行")]),s._v(" "),a("p",[s._v("在 release 文件夹下有三个环境版本，这里选择 X86_64 的环境")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"image","data-src":"https://jsd.cdn.zzko.cn/gh/xiaose-code/picx-images-hosting@master/img/image.1zi078tsq8.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("先运行服务端（要先把测试用的红色的USB key U盘先插入连接到虚拟机）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 要进入到 /net_wipe/release/x86_64/kylinV10/bin 下面的 bin 目录下，先运行服务端，在另起一个标签页运行客户端。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ./server_wipe "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/etc/conf/configure.txt\n./client_wipe "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/etc/conf/configure.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"_5-打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-打包"}},[s._v("#")]),s._v(" 5.打包")]),s._v(" "),a("p",[s._v("要把 "),a("code",[s._v("net_wipe/release/x86_64/kylinV10/bin")]),s._v(" 目录下的 "),a("code",[s._v("client_wipe 和 server_wipe")]),s._v(" 这两个可执行文件复制到 "),a("code",[s._v("net_wipe/deb/origin/x86_64/bin")]),s._v(" 这里")]),s._v(" "),a("blockquote",[a("p",[s._v("这是示范的是 x86_64 平台下的方式，其他平台同理，同样复制到对应的目录下，例如 arm 平台就复制到 "),a("code",[s._v("net_wipe/deb/origin/aarch64/bin")]),s._v(" 这里")])]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"image","data-src":"https://jsd.cdn.zzko.cn/gh/xiaose-code/picx-images-hosting@master/img/image.1ov6e3mf0d.webp",loading:"lazy"}})]),s._v(" "),a("p",[s._v("然后返回到 "),a("code",[s._v("net_wipe/deb/")]),s._v(" 目录运行命令")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("python3 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" Packager "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" single "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".0\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 建议选择跨平台打包，三个平台的安装包一起打包，生成镜像文件时能用到")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("其中，这里最后的数字是版本号，可以随意更改，合理即可。")])]),s._v(" "),a("h2",{attrs:{id:"_6-生成镜像文件-要先打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-生成镜像文件-要先打包"}},[s._v("#")]),s._v(" 6.生成镜像文件（要先打包）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkisofs")]),s._v(" --input-charset utf-8 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-T")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-J")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-V")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CleanTool"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(".iso "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("$2 是要制作成镜像的文件夹")]),s._v(" "),a("li",[s._v("$1 是镜像的名字")])]),s._v(" "),a("p",[s._v("例如：以 net_wipe 项目为例，想要把 net_wipe 这个项目打包成镜像文件，把 "),a("code",[s._v("net_wipe/passwd_ask")]),s._v(" 目录下 x86_64、mips64、aarch64 这三个目录复制到新创建一个 iso 文件夹里")]),s._v(" "),a("p",[a("code",[s._v("net_wipe/deb")]),s._v(" 目录里面的原来的内容：")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"image","data-src":"https://jsd.cdn.zzko.cn/gh/xiaose-code/picx-images-hosting@master/img/image.2krnv03wr1.webp",loading:"lazy"}})]),s._v(" "),a("p",[s._v("最终的目录内容：")]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"image","data-src":"https://jsd.cdn.zzko.cn/gh/xiaose-code/picx-images-hosting@master/img/image.4ckmpweg2c.webp",loading:"lazy"}})]),s._v(" "),a("p",[s._v("要在 "),a("code",[s._v("$2")]),s._v(" 这个文件的上一级目录执行这个命令，即 net_wipe 这层目录")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkisofs")]),s._v(" --input-charset utf-8 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-T")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-J")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-V")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CleanTool"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" CleanTool.iso deb\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);