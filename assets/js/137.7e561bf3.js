(window.webpackJsonp=window.webpackJsonp||[]).push([[137],{470:function(s,a,t){"use strict";t.r(a);var e=t(4),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"power-destory-项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#power-destory-项目"}},[s._v("#")]),s._v(" Power_Destory 项目")]),s._v(" "),a("h2",{attrs:{id:"_1-git-地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-git-地址"}},[s._v("#")]),s._v(" 1. git 地址")]),s._v(" "),a("p",[s._v("http://192.168.6.2/wenxiaobin/power_destory1.git")]),s._v(" "),a("h2",{attrs:{id:"_2-编译依赖库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-编译依赖库"}},[s._v("#")]),s._v(" 2. 编译依赖库")]),s._v(" "),a("h3",{attrs:{id:"_2-1-编译-libhv-库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-编译-libhv-库"}},[s._v("#")]),s._v(" 2.1 编译 libhv 库")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" thirdparty/libhv\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" build "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" build\n\ncmake "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("将 "),a("code",[s._v("power_destory1/thirdparty/libhv/build/lib")]),s._v(" 目录下的静态库 (libhv.so 和 libhv_static.a) 拷贝到 "),a("code",[s._v("power_destory1/power_destory_srv/lib")]),s._v(" 和 "),a("code",[s._v("power_destory1/power_destory_ui/lib")]),s._v(" 下")]),s._v(" "),a("blockquote",[a("p",[s._v("x86_64、arm64 和 mips64 都是如此")])]),s._v(" "),a("h3",{attrs:{id:"_2-2-编译-ssl-库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-编译-ssl-库"}},[s._v("#")]),s._v(" 2.2 编译 SSL 库")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" thirdparty/openssl-1.0.2g\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" build\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 各平台用对应的命令")]),s._v("\n./build.sh x86_64 build 的绝对路径\n./build.sh aarch64 build 的绝对路径\n./build.sh mips64 build 的绝对路径\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("将 "),a("code",[s._v("power_destory1/thirdparty/openssl-1.0.2g/build/lib")]),s._v(" 目录下的静态库拷到 "),a("code",[s._v("power_destory1/power_destory_srv/lib")]),s._v(" 和 "),a("code",[s._v("power_destory1/power_destory_ui/lib")]),s._v(" 下")]),s._v(" "),a("h2",{attrs:{id:"_3-运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-运行"}},[s._v("#")]),s._v(" 3. 运行")]),s._v(" "),a("ol",[a("li",[s._v("在 "),a("code",[s._v("power_destory_srv/main.cpp")]),s._v(" 和 "),a("code",[s._v("power_destory_ui/main.cpp")]),s._v(" 里")])]),s._v(" "),a("div",{staticClass:"language-CPP line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果是打包项目就用这个路径")]),s._v("\nstring path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/apps/com.jc.clean/files/etc/configure.txt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果是在终端运行项目就用这个路径")]),s._v("\nstring path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"../etc/configure.txt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 两个路径保留其中一个即可")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"image","data-src":"https://jsd.cdn.zzko.cn/gh/xiaose-code/picx-images-hosting@master/img/image.2dofkwlgr8.webp",loading:"lazy"}})]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("改完之后要记得重新 make")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 power_destory1/power_destory_ui/build 目录")]),s._v("\nqmake "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 power_destory1/power_destory_srv/build 目录")]),s._v("\nqmake "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("运行")])]),s._v(" "),a("p",[a("strong",[s._v("服务端")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 power_destory1/power_destory_srv/build")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ./power_destory_srv\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("客户端")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入power_destory1/power_destory_ui/build")]),s._v("\n./Power_Destory\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"_4-打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-打包"}},[s._v("#")]),s._v(" 4. 打包")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("进入 "),a("code",[s._v("power_destory1/deb")]),s._v(" 目录")])]),s._v(" "),a("li",[a("p",[s._v("将 "),a("code",[s._v("power_destory_srv")]),s._v(" 和 "),a("code",[s._v("Power_Destory")]),s._v(" 两个可执行文件拷到各平台对应目录下origin/x86_64/bin")]),s._v(" "),a("p",[s._v("origin/aarch64/bin")]),s._v(" "),a("p",[s._v("origin/mips64/bin")])]),s._v(" "),a("li",[a("p",[s._v("power_destory1/deb 目录下执行")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("python3 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" Packager "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" single "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(".0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("hr"),s._v(" "),a("h3",{attrs:{id:"_4-1-bug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-bug"}},[s._v("#")]),s._v(" 4.1 bug")]),s._v(" "),a("p",[s._v("这个打包脚本打包这个项目会有点问题，需要改下：")]),s._v(" "),a("ol",[a("li",[s._v("在图形界面鼠标右键解压缩 deb 包")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" com.jc.clean_1.0.0_amd64/opt/apps/com.jc.clean/files/bin/start_Power_Destory.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[s._v("将最后一行改为 "),a("code",[s._v("$PWD/Power_Destory")])])]),s._v(" "),a("li",[a("p",[s._v("执行命令")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("dpkg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-b")]),s._v(" com.jc.clean_1.0.0_amd64\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_5-制作镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-制作镜像"}},[s._v("#")]),s._v(" 5. 制作镜像")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkisofs")]),s._v(" --input-charset utf-8 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-T")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-J")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-V")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CleanTool"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(".iso "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# $2 是要制作成镜像的文件夹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# $1 是镜像的名字")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);