(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{395:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"sql-语法基础小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sql-语法基础小结"}},[s._v("#")]),s._v(" SQL 语法基础小结")]),s._v(" "),a("h2",{attrs:{id:"一、基本概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、基本概念"}},[s._v("#")]),s._v(" 一、基本概念")]),s._v(" "),a("h3",{attrs:{id:"数据库术语"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库术语"}},[s._v("#")]),s._v(" 数据库术语")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("数据库（database）")]),s._v(" - 保存有组织的数据的容器（通常是一个文件或一组文件）。")]),s._v(" "),a("li",[a("code",[s._v("数据表（table）")]),s._v(" - 某种特定类型数据的结构化清单。")]),s._v(" "),a("li",[a("code",[s._v("模式（schema）")]),s._v(" - 关于数据库和表的布局及特性的信息。模式定义了数据在表中如何存储，包含存储什么样的数据，数据如何分解，各部分信息如何命名等信息。数据库和表都有模式。")]),s._v(" "),a("li",[a("code",[s._v("列（column）")]),s._v(" - 表中的一个字段。所有表都是由一个或多个列组成的。")]),s._v(" "),a("li",[a("code",[s._v("行（row）")]),s._v(" - 表中的一个记录。")]),s._v(" "),a("li",[a("code",[s._v("主键（primary key）")]),s._v(" - 一列（或一组列），其值能够唯一标识表中每一行。")])]),s._v(" "),a("h3",{attrs:{id:"语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),a("blockquote",[a("p",[s._v("（Structured Query Language)，标准  由 ANSI 标准委员会管理，从而称为 ANSI 。各个 DBMS 都有自己的实现，如 PL/、Transact- 等。")])]),s._v(" "),a("h4",{attrs:{id:"语法结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法结构"}},[s._v("#")]),s._v(" 语法结构")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/15/16fa77ca4cc88a8a~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp",alt:"-syntax"}})]),s._v(" "),a("p",[s._v("语法结构包括：")]),s._v(" "),a("ul",[a("li",[a("strong",[a("code",[s._v("子句")])]),s._v(" - 是语句和查询的组成成分。（在某些情况下，这些都是可选的。）")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("表达式")])]),s._v(" - 可以产生任何标量值，或由列和行的数据库表")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("谓词")])]),s._v(" - 给需要评估的  三值逻辑（3VL）（true/false/unknown）或布尔真值指定条件，并限制语句和查询的效果，或改变程序流程。")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("查询")])]),s._v(" - 基于特定条件检索数据。这是  的一个重要组成部分。")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("语句")])]),s._v(" - 可以持久地影响纲要和数据，也可以控制数据库事务、程序流程、连接、会话或诊断。")])]),s._v(" "),a("h4",{attrs:{id:"语法要点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法要点"}},[s._v("#")]),s._v(" 语法要点")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("语句不区分大小写")]),s._v("，但是数据库表名、列名和值是否区分，依赖于具体的 DBMS 以及配置。")])]),s._v(" "),a("p",[s._v("例如："),a("code",[s._v("SELECT")]),s._v(" 与 "),a("code",[s._v("select")]),s._v(" 、"),a("code",[s._v("Select")]),s._v(" 是相同的。")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("多条  语句必须以分号（"),a("code",[s._v(";")]),s._v("）分隔")]),s._v("。")]),s._v(" "),a("li",[s._v("处理  语句时，"),a("strong",[s._v("所有空格都被忽略")]),s._v("。 语句可以写成一行，也可以分写为多行。")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 一行  语句")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'robot'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'robot'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" username "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 多行  语句")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'robot'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'robot'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" username "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ul",[a("li",[s._v("支持三种注释")])]),s._v(" "),a("div",{staticClass:"language-awk line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-awk"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 注释1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" 注释"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" 注释"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分类"}},[s._v("#")]),s._v(" 分类")]),s._v(" "),a("h4",{attrs:{id:"数据定义语言-ddl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据定义语言-ddl"}},[s._v("#")]),s._v(" 数据定义语言（DDL）")]),s._v(" "),a("p",[s._v("数据定义语言（Data Definition Language，DDL）是  语言集中负责数据结构定义与数据库对象定义的语言。")]),s._v(" "),a("p",[s._v("DDL 的主要功能是"),a("strong",[s._v("定义数据库对象")]),s._v("。")]),s._v(" "),a("p",[s._v("DDL 的核心指令是 "),a("code",[s._v("CREATE")]),s._v("、"),a("code",[s._v("ALTER")]),s._v("、"),a("code",[s._v("DROP")]),s._v("。")]),s._v(" "),a("h4",{attrs:{id:"数据操纵语言-dml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据操纵语言-dml"}},[s._v("#")]),s._v(" 数据操纵语言（DML）")]),s._v(" "),a("p",[s._v("数据操纵语言（Data Manipulation Language, DML）是用于数据库操作，对数据库其中的对象和数据运行访问工作的编程语句。")]),s._v(" "),a("p",[s._v("DML 的主要功能是 "),a("strong",[s._v("访问数据")]),s._v("，因此其语法都是以"),a("strong",[s._v("读写数据库")]),s._v("为主。")]),s._v(" "),a("p",[s._v("DML 的核心指令是 "),a("code",[s._v("INSERT")]),s._v("、"),a("code",[s._v("UPDATE")]),s._v("、"),a("code",[s._v("DELETE")]),s._v("、"),a("code",[s._v("SELECT")]),s._v("。这四个指令合称 CRUD(Create, Read, Update, Delete)，即增删改查。")]),s._v(" "),a("h4",{attrs:{id:"事务控制语言-tcl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事务控制语言-tcl"}},[s._v("#")]),s._v(" 事务控制语言（TCL）")]),s._v(" "),a("p",[s._v("事务控制语言 (Transaction Control Language, TCL) 用于"),a("strong",[s._v("管理数据库中的事务")]),s._v("。这些用于管理由 DML 语句所做的更改。它还允许将语句分组为逻辑事务。")]),s._v(" "),a("p",[s._v("TCL 的核心指令是 "),a("code",[s._v("COMMIT")]),s._v("、"),a("code",[s._v("ROLLBACK")]),s._v("。")]),s._v(" "),a("h4",{attrs:{id:"数据控制语言-dcl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据控制语言-dcl"}},[s._v("#")]),s._v(" 数据控制语言（DCL）")]),s._v(" "),a("p",[s._v("数据控制语言 (Data Control Language, DCL) 是一种可对数据访问权进行控制的指令，它可以控制特定用户账户对数据表、查看表、预存程序、用户自定义函数等数据库对象的控制权。")]),s._v(" "),a("p",[s._v("DCL 的核心指令是 "),a("code",[s._v("GRANT")]),s._v("、"),a("code",[s._v("REVOKE")]),s._v("。")]),s._v(" "),a("p",[s._v("DCL 以"),a("strong",[s._v("控制用户的访问权限")]),s._v("为主，因此其指令作法并不复杂，可利用 DCL 控制的权限有："),a("code",[s._v("CONNECT")]),s._v("、"),a("code",[s._v("SELECT")]),s._v("、"),a("code",[s._v("INSERT")]),s._v("、"),a("code",[s._v("UPDATE")]),s._v("、"),a("code",[s._v("DELETE")]),s._v("、"),a("code",[s._v("EXECUTE")]),s._v("、"),a("code",[s._v("USAGE")]),s._v("、"),a("code",[s._v("REFERENCES")]),s._v("。")]),s._v(" "),a("p",[s._v("根据不同的 DBMS 以及不同的安全性实体，其支持的权限控制也有所不同。")]),s._v(" "),a("hr"),s._v(" "),a("p",[a("em",[s._v("（以下为 DML 语句用法）")])]),s._v(" "),a("h2",{attrs:{id:"二、增删改查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、增删改查"}},[s._v("#")]),s._v(" 二、增删改查")]),s._v(" "),a("blockquote",[a("p",[s._v("增删改查，又称为 CRUD，数据库基本操作中的基本操作。")])]),s._v(" "),a("h3",{attrs:{id:"插入数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插入数据"}},[s._v("#")]),s._v(" 插入数据")]),s._v(" "),a("blockquote",[a("ul",[a("li",[a("code",[s._v("INSERT INTO")]),s._v(" 语句用于向表中插入新记录。")])])]),s._v(" "),a("p",[a("strong",[s._v("插入完整的行")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxxx@163.com'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("插入行的一部分")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'admin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxxx@163.com'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("插入查询出来的数据")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" name\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"更新数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新数据"}},[s._v("#")]),s._v(" 更新数据")]),s._v(" "),a("blockquote",[a("ul",[a("li",[a("code",[s._v("UPDATE")]),s._v(" 语句用于更新表中的记录。")])])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" username"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'robot'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" password"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'robot'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" username "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"删除数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除数据"}},[s._v("#")]),s._v(" 删除数据")]),s._v(" "),a("blockquote",[a("ul",[a("li",[a("code",[s._v("DELETE")]),s._v(" 语句用于删除表中的记录。")]),s._v(" "),a("li",[a("code",[s._v("TRUNCATE TABLE")]),s._v(" 可以清空表，也就是删除所有行。")])])]),s._v(" "),a("p",[a("strong",[s._v("删除表中的指定数据")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" username "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'robot'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("清空表中的数据")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRUNCATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"查询数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询数据"}},[s._v("#")]),s._v(" 查询数据")]),s._v(" "),a("blockquote",[a("ul",[a("li",[a("p",[a("code",[s._v("SELECT")]),s._v(" 语句用于从数据库中查询数据。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("DISTINCT")]),s._v(" 用于返回唯一不同的值。它作用于所有列，也就是说所有列的值都相同才算相同。")])]),s._v(" "),a("li",[a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("限制返回的行数。可以有两个参数，第一个参数为起始行，从 0 开始；第二个参数为返回的总行数。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("ASC")]),s._v(" ：升序（默认）")]),s._v(" "),a("li",[a("code",[s._v("DESC")]),s._v(" ：降序")])])])])]),s._v(" "),a("p",[a("strong",[s._v("查询单列")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" prod_name\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" products"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("查询多列")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" prod_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prod_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prod_price\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" products"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("查询所有列")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" products"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("查询不同的值")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),s._v("\nvend_id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" products"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("限制查询结果")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 返回前 5 行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" mytable "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" mytable "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 返回第 3 ~ 5 行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" mytable "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"三、子查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、子查询"}},[s._v("#")]),s._v(" 三、子查询")]),s._v(" "),a("blockquote",[a("p",[s._v("子查询是嵌套在较大查询中的  查询。子查询也称为"),a("strong",[s._v("内部查询")]),s._v("或"),a("strong",[s._v("内部选择")]),s._v("，而包含子查询的语句也称为"),a("strong",[s._v("外部查询")]),s._v("或"),a("strong",[s._v("外部选择")]),s._v("。")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("子查询可以嵌套在 "),a("code",[s._v("SELECT")]),s._v("，"),a("code",[s._v("INSERT")]),s._v("，"),a("code",[s._v("UPDATE")]),s._v(" 或 "),a("code",[s._v("DELETE")]),s._v(" 语句内或另一个子查询中。")])]),s._v(" "),a("li",[a("p",[s._v("子查询通常会在另一个 "),a("code",[s._v("SELECT")]),s._v(" 语句的 "),a("code",[s._v("WHERE")]),s._v(" 子句中添加。")])]),s._v(" "),a("li",[a("p",[s._v("您可以使用比较运算符，如 "),a("code",[s._v(">")]),s._v("，"),a("code",[s._v("<")]),s._v("，或 "),a("code",[s._v("=")]),s._v("。比较运算符也可以是多行运算符，如 "),a("code",[s._v("IN")]),s._v("，"),a("code",[s._v("ANY")]),s._v(" 或 "),a("code",[s._v("ALL")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("子查询必须被圆括号 "),a("code",[s._v("()")]),s._v(" 括起来。")])]),s._v(" "),a("li",[a("p",[s._v("内部查询首先在其父查询之前执行，以便可以将内部查询的结果传递给外部查询。执行过程可以参考下图：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/15/16fa77ca4da1bb77~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp",alt:"-subqueries"}})])])]),s._v(" "),a("p",[a("strong",[s._v("子查询的子查询")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n    cust_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    cust_contact\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n    customers\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v("\n    cust_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n            cust_id\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n            orders\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v("\n            order_num "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n                    order_num\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n                    orderitems\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v("\n                    prod_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'RGAN01'")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("h3",{attrs:{id:"where"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#where"}},[s._v("#")]),s._v(" WHERE")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("WHERE")]),s._v(" 子句用于过滤记录，即缩小访问数据的范围。")]),s._v(" "),a("li",[a("code",[s._v("WHERE")]),s._v(" 后跟一个返回 "),a("code",[s._v("true")]),s._v(" 或 "),a("code",[s._v("false")]),s._v(" 的条件。")]),s._v(" "),a("li",[a("code",[s._v("WHERE")]),s._v(" 可以与 "),a("code",[s._v("SELECT")]),s._v("，"),a("code",[s._v("UPDATE")]),s._v(" 和 "),a("code",[s._v("DELETE")]),s._v(" 一起使用。")]),s._v(" "),a("li",[s._v("可以在 "),a("code",[s._v("WHERE")]),s._v(" 子句中使用的操作符")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("运算符")]),s._v(" "),a("th",[s._v("描述")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("=")]),s._v(" "),a("td",[s._v("等于")])]),s._v(" "),a("tr",[a("td",[s._v("<>")]),s._v(" "),a("td",[s._v("不等于。注释：在  的一些版本中，该操作符可被写成 !=")])]),s._v(" "),a("tr",[a("td",[s._v(">")]),s._v(" "),a("td",[s._v("大于")])]),s._v(" "),a("tr",[a("td",[s._v("<")]),s._v(" "),a("td",[s._v("小于")])]),s._v(" "),a("tr",[a("td",[s._v(">=")]),s._v(" "),a("td",[s._v("大于等于")])]),s._v(" "),a("tr",[a("td",[s._v("<=")]),s._v(" "),a("td",[s._v("小于等于")])]),s._v(" "),a("tr",[a("td",[s._v("BETWEEN")]),s._v(" "),a("td",[s._v("在某个范围内")])]),s._v(" "),a("tr",[a("td",[s._v("LIKE")]),s._v(" "),a("td",[s._v("搜索某种模式")])]),s._v(" "),a("tr",[a("td",[s._v("IN")]),s._v(" "),a("td",[s._v("指定针对某个列的多个可能值")])])])]),s._v(" "),a("p",[a("strong",[a("code",[s._v("SELECT")]),s._v(" 语句中的 "),a("code",[s._v("WHERE")]),s._v(" 子句")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" Customers\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" cust_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Kids Place'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[a("code",[s._v("UPDATE")]),s._v(" 语句中的 "),a("code",[s._v("WHERE")]),s._v(" 子句")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" Customers\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" cust_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Jack Jones'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" cust_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Kids Place'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[a("code",[s._v("DELETE")]),s._v(" 语句中的 "),a("code",[s._v("WHERE")]),s._v(" 子句")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" Customers\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" cust_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Kids Place'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"in-和-between"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-和-between"}},[s._v("#")]),s._v(" IN 和 BETWEEN")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("IN")]),s._v(" 操作符在 "),a("code",[s._v("WHERE")]),s._v(" 子句中使用，作用是在指定的几个特定值中任选一个值。")]),s._v(" "),a("li",[a("code",[s._v("BETWEEN")]),s._v(" 操作符在 "),a("code",[s._v("WHERE")]),s._v(" 子句中使用，作用是选取介于某个范围内的值。")])]),s._v(" "),a("p",[a("strong",[s._v("IN 示例")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" products\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" vend_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DLL01'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'BRS01'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("BETWEEN 示例")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" products\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" prod_price "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("BETWEEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"and、or、not"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#and、or、not"}},[s._v("#")]),s._v(" AND、OR、NOT")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("AND")]),s._v("、"),a("code",[s._v("OR")]),s._v("、"),a("code",[s._v("NOT")]),s._v(" 是用于对过滤条件的逻辑处理指令。")]),s._v(" "),a("li",[a("code",[s._v("AND")]),s._v(" 优先级高于 "),a("code",[s._v("OR")]),s._v("，为了明确处理顺序，可以使用 "),a("code",[s._v("()")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("AND")]),s._v(" 操作符表示左右条件都要满足。")]),s._v(" "),a("li",[a("code",[s._v("OR")]),s._v(" 操作符表示左右条件满足任意一个即可。")]),s._v(" "),a("li",[a("code",[s._v("NOT")]),s._v(" 操作符用于否定一个条件。")])]),s._v(" "),a("p",[a("strong",[s._v("AND 示例")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" prod_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prod_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prod_price\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" products\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" vend_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DLL01'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" prod_price "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("OR 示例")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" prod_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prod_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prod_price\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" products\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" vend_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DLL01'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("OR")]),s._v(" vend_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'BRS01'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("NOT 示例")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" products\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" prod_price "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("BETWEEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"like"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#like"}},[s._v("#")]),s._v(" LIKE")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("LIKE")]),s._v(" 操作符在 "),a("code",[s._v("WHERE")]),s._v(" 子句中使用，作用是确定字符串是否匹配模式。")]),s._v(" "),a("li",[s._v("只有字段是文本值时才使用 "),a("code",[s._v("LIKE")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("LIKE")]),s._v(" 支持两个通配符匹配选项："),a("code",[s._v("%")]),s._v(" 和 "),a("code",[s._v("_")]),s._v("。")]),s._v(" "),a("li",[s._v("不要滥用通配符，通配符位于开头处匹配会非常慢。")]),s._v(" "),a("li",[a("code",[s._v("%")]),s._v(" 表示任何字符出现任意次数。")]),s._v(" "),a("li",[a("code",[s._v("_")]),s._v(" 表示任何字符出现一次。")])]),s._v(" "),a("p",[a("strong",[s._v("% 示例")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" prod_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prod_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prod_price\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" products\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" prod_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("LIKE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%bean bag%'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("_ 示例")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" prod_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prod_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prod_price\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" products\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" prod_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("LIKE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'__ inch teddy bear'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"四、连接和组合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、连接和组合"}},[s._v("#")]),s._v(" 四、连接和组合")]),s._v(" "),a("h3",{attrs:{id:"连接-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接-join"}},[s._v("#")]),s._v(" 连接（JOIN）")]),s._v(" "),a("blockquote",[a("ul",[a("li",[a("p",[s._v("如果一个 "),a("code",[s._v("JOIN")]),s._v(" 至少有一个公共字段并且它们之间存在关系，则该 "),a("code",[s._v("JOIN")]),s._v(" 可以在两个或多个表上工作。")])]),s._v(" "),a("li",[a("p",[s._v("连接用于连接多个表，使用 "),a("code",[s._v("JOIN")]),s._v(" 关键字，并且条件语句使用 "),a("code",[s._v("ON")]),s._v(" 而不是 "),a("code",[s._v("WHERE")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("JOIN")]),s._v(" 保持基表（结构和数据）不变。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("JOIN")]),s._v(" 有两种连接类型：内连接和外连接。")])]),s._v(" "),a("li",[a("p",[s._v("内连接又称等值连接，使用 INNER")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("JOIN\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("关键字。在没有条件语句的情况下返回笛卡尔积。")]),s._v(" "),a("ul",[a("li",[s._v("自连接可以看成内连接的一种，只是连接的表是自身而已。")])])]),s._v(" "),a("li",[a("p",[s._v("自然连接是把同名列通过 = 测试连接起来的，同名列可以有多个。")])]),s._v(" "),a("li",[a("p",[s._v("内连接 vs 自然连接")]),s._v(" "),a("ul",[a("li",[s._v("内连接提供连接的列，而自然连接自动连接所有同名列。")])])]),s._v(" "),a("li",[a("p",[s._v("外连接返回一个表中的所有行，并且仅返回来自次表中满足连接条件的那些行，即两个表中的列是相等的。外连接分为左外连接、右外连接、全外连接（My 不支持）。")]),s._v(" "),a("ul",[a("li",[s._v("左外连接就是保留左表没有关联的行。")]),s._v(" "),a("li",[s._v("右外连接就是保留右表没有关联的行。")])])]),s._v(" "),a("li",[a("p",[s._v("连接 vs 子查询")]),s._v(" "),a("ul",[a("li",[s._v("连接可以替换子查询，并且比子查询的效率一般会更快。")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/15/16fa77ca4ecc58cf~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp",alt:"-join"}})])])])]),s._v(" "),a("h4",{attrs:{id:"内连接-inner-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内连接-inner-join"}},[s._v("#")]),s._v(" 内连接（INNER JOIN）")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" vend_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prod_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prod_price\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" vendors "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INNER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v(" products\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" vendors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vend_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" products"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("vend_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"自连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自连接"}},[s._v("#")]),s._v(" 自连接")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" c1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_contact\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" customers c1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" customers c2\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" c1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_name\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" c2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_contact "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Jim Jones'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"自然连接-natural-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自然连接-natural-join"}},[s._v("#")]),s._v(" 自然连接（NATURAL JOIN）")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" Products\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("NATURAL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v(" Customers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"左连接-left-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#左连接-left-join"}},[s._v("#")]),s._v(" 左连接（LEFT JOIN）")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" customers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" orders"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("order_num\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" customers "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LEFT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v(" orders\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" customers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" orders"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"右连接-right-join"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#右连接-right-join"}},[s._v("#")]),s._v(" 右连接（RIGHT JOIN）")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" customers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" orders"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("order_num\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" customers "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RIGHT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v(" orders\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" customers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" orders"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"组合-union"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组合-union"}},[s._v("#")]),s._v(" 组合（UNION）")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("UNION")]),s._v(" 运算符将两个或更多查询的结果组合起来，并生成一个结果集，其中包含来自 "),a("code",[s._v("UNION")]),s._v(" 中参与查询的提取行。")])]),s._v(" "),a("li",[a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("UNION\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("基本规则")]),s._v(" "),a("ul",[a("li",[s._v("所有查询的列数和列顺序必须相同。")]),s._v(" "),a("li",[s._v("每个查询中涉及表的列的数据类型必须相同或兼容。")]),s._v(" "),a("li",[s._v("通常返回的列名取自第一个查询。")])])]),s._v(" "),a("li",[a("p",[s._v("默认会去除相同行，如果需要保留相同行，使用 "),a("code",[s._v("UNION ALL")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("只能包含一个 "),a("code",[s._v("ORDER BY")]),s._v(" 子句，并且必须位于语句的最后。")])]),s._v(" "),a("li",[a("p",[s._v("应用场景")]),s._v(" "),a("ul",[a("li",[s._v("在一个查询中从不同的表返回结构数据。")]),s._v(" "),a("li",[s._v("对一个表执行多个查询，按一个查询返回数据。")])])])]),s._v(" "),a("p",[a("strong",[s._v("组合查询")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" cust_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" cust_contact"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" cust_email\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" customers\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" cust_state "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'IL'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'IN'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'MI'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNION")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" cust_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" cust_contact"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" cust_email\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" customers\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" cust_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Fun4All'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"join-vs-union"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#join-vs-union"}},[s._v("#")]),s._v(" JOIN vs UNION")]),s._v(" "),a("ul",[a("li",[s._v("JOIN vs UNION\n"),a("ul",[a("li",[a("code",[s._v("JOIN")]),s._v(" 中连接表的列可能不同，但在 "),a("code",[s._v("UNION")]),s._v(" 中，所有查询的列数和列顺序必须相同。")]),s._v(" "),a("li",[a("code",[s._v("UNION")]),s._v(" 将查询之后的行放在一起（垂直放置），但 "),a("code",[s._v("JOIN")]),s._v(" 将查询之后的列放在一起（水平放置），即它构成一个笛卡尔积。")])])])]),s._v(" "),a("h2",{attrs:{id:"五、函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、函数"}},[s._v("#")]),s._v(" 五、函数")]),s._v(" "),a("blockquote",[a("p",[s._v("🔔 注意：不同数据库的函数往往各不相同，因此不可移植。本节主要以 My 的函数为例。")])]),s._v(" "),a("h3",{attrs:{id:"文本处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文本处理"}},[s._v("#")]),s._v(" 文本处理")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("函数")]),s._v(" "),a("th",[s._v("说明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[a("code",[s._v("LEFT()")]),s._v("、"),a("code",[s._v("RIGHT()")])]),s._v(" "),a("td",[s._v("左边或者右边的字符")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("LOWER()")]),s._v("、"),a("code",[s._v("UPPER()")])]),s._v(" "),a("td",[s._v("转换为小写或者大写")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("LTRIM()")]),s._v("、"),a("code",[s._v("RTIM()")])]),s._v(" "),a("td",[s._v("去除左边或者右边的空格")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("LENGTH()")])]),s._v(" "),a("td",[s._v("长度")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("SOUNDEX()")])]),s._v(" "),a("td",[s._v("转换为语音值")])])])]),s._v(" "),a("p",[s._v("其中，"),a("strong",[s._v("SOUNDEX()")]),s._v(" 可以将一个字符串转换为描述其语音表示的字母数字模式。")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" mytable\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" SOUNDEX"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("col1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" SOUNDEX"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'apple'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"日期和时间处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#日期和时间处理"}},[s._v("#")]),s._v(" 日期和时间处理")]),s._v(" "),a("ul",[a("li",[s._v("日期格式："),a("code",[s._v("YYYY-MM-DD")])]),s._v(" "),a("li",[s._v("时间格式："),a("code",[s._v("HH:MM:SS")])])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("函 数")]),s._v(" "),a("th",[s._v("说 明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[a("code",[s._v("AddDate()")])]),s._v(" "),a("td",[s._v("增加一个日期（天、周等）")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("AddTime()")])]),s._v(" "),a("td",[s._v("增加一个时间（时、分等）")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("CurDate()")])]),s._v(" "),a("td",[s._v("返回当前日期")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("CurTime()")])]),s._v(" "),a("td",[s._v("返回当前时间")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("Date()")])]),s._v(" "),a("td",[s._v("返回日期时间的日期部分")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("DateDiff()")])]),s._v(" "),a("td",[s._v("计算两个日期之差")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("Date_Add()")])]),s._v(" "),a("td",[s._v("高度灵活的日期运算函数")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("Date_Format()")])]),s._v(" "),a("td",[s._v("返回一个格式化的日期或时间串")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("Day()")])]),s._v(" "),a("td",[s._v("返回一个日期的天数部分")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("DayOfWeek()")])]),s._v(" "),a("td",[s._v("对于一个日期，返回对应的星期几")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("Hour()")])]),s._v(" "),a("td",[s._v("返回一个时间的小时部分")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("Minute()")])]),s._v(" "),a("td",[s._v("返回一个时间的分钟部分")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("Month()")])]),s._v(" "),a("td",[s._v("返回一个日期的月份部分")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("Now()")])]),s._v(" "),a("td",[s._v("返回当前日期和时间")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("Second()")])]),s._v(" "),a("td",[s._v("返回一个时间的秒部分")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("Time()")])]),s._v(" "),a("td",[s._v("返回一个日期时间的时间部分")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("Year()")])]),s._v(" "),a("td",[s._v("返回一个日期的年份部分")])])])]),s._v(" "),a("div",{staticClass:"language-csharp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[s._v("my"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("NOW")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-apache line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("2018-4-14 20:25:11\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"数值处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数值处理"}},[s._v("#")]),s._v(" 数值处理")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("函数")]),s._v(" "),a("th",[s._v("说明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("SIN()")]),s._v(" "),a("td",[s._v("正弦")])]),s._v(" "),a("tr",[a("td",[s._v("COS()")]),s._v(" "),a("td",[s._v("余弦")])]),s._v(" "),a("tr",[a("td",[s._v("TAN()")]),s._v(" "),a("td",[s._v("正切")])]),s._v(" "),a("tr",[a("td",[s._v("ABS()")]),s._v(" "),a("td",[s._v("绝对值")])]),s._v(" "),a("tr",[a("td",[s._v("SQRT()")]),s._v(" "),a("td",[s._v("平方根")])]),s._v(" "),a("tr",[a("td",[s._v("MOD()")]),s._v(" "),a("td",[s._v("余数")])]),s._v(" "),a("tr",[a("td",[s._v("EXP()")]),s._v(" "),a("td",[s._v("指数")])]),s._v(" "),a("tr",[a("td",[s._v("PI()")]),s._v(" "),a("td",[s._v("圆周率")])]),s._v(" "),a("tr",[a("td",[s._v("RAND()")]),s._v(" "),a("td",[s._v("随机数")])])])]),s._v(" "),a("h3",{attrs:{id:"汇总"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#汇总"}},[s._v("#")]),s._v(" 汇总")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("函 数")]),s._v(" "),a("th",[s._v("说 明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[a("code",[s._v("AVG()")])]),s._v(" "),a("td",[s._v("返回某列的平均值")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("COUNT()")])]),s._v(" "),a("td",[s._v("返回某列的行数")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("MAX()")])]),s._v(" "),a("td",[s._v("返回某列的最大值")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("MIN()")])]),s._v(" "),a("td",[s._v("返回某列的最小值")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("SUM()")])]),s._v(" "),a("td",[s._v("返回某列值之和")])])])]),s._v(" "),a("p",[a("code",[s._v("AVG()")]),s._v(" 会忽略 NULL 行。")]),s._v(" "),a("p",[s._v("使用 DISTINCT 可以让汇总函数值汇总不同的值。")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("AVG")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DISTINCT")]),s._v(" col1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" avg_col\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" mytable\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"六、排序和分组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、排序和分组"}},[s._v("#")]),s._v(" 六、排序和分组")]),s._v(" "),a("h3",{attrs:{id:"order-by"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#order-by"}},[s._v("#")]),s._v(" ORDER BY")]),s._v(" "),a("ul",[a("li",[a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("用于对结果集进行排序。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("ASC")]),s._v(" ：升序（默认）")]),s._v(" "),a("li",[a("code",[s._v("DESC")]),s._v(" ：降序")])])]),s._v(" "),a("li",[a("p",[s._v("可以按多个列进行排序，并且为每个列指定不同的排序方式")])])]),s._v(" "),a("p",[a("strong",[s._v("指定多个列的排序方向")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" products\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" prod_price "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" prod_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ASC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"group-by"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#group-by"}},[s._v("#")]),s._v(" GROUP BY")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("GROUP BY")]),s._v(" 子句将记录分组到汇总行中。")]),s._v(" "),a("li",[a("code",[s._v("GROUP BY")]),s._v(" 为每个组返回一个记录。")]),s._v(" "),a("li",[a("code",[s._v("GROUP BY")]),s._v(" 通常还涉及聚合：COUNT，MAX，SUM，AVG 等。")]),s._v(" "),a("li",[a("code",[s._v("GROUP BY")]),s._v(" 可以按一列或多列进行分组。")]),s._v(" "),a("li",[a("code",[s._v("GROUP BY")]),s._v(" 按分组字段进行排序后，"),a("code",[s._v("ORDER BY")]),s._v(" 可以以汇总字段来进行排序。")])]),s._v(" "),a("p",[a("strong",[s._v("分组")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" cust_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cust_address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" addr_num\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" Customers "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" cust_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("分组后排序")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" cust_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cust_address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" addr_num\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" Customers "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" cust_name\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" cust_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"having"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#having"}},[s._v("#")]),s._v(" HAVING")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("HAVING")]),s._v(" 用于对汇总的 "),a("code",[s._v("GROUP BY")]),s._v(" 结果进行过滤。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("HAVING")]),s._v(" 要求存在一个 "),a("code",[s._v("GROUP BY")]),s._v(" 子句。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("WHERE")]),s._v(" 和 "),a("code",[s._v("HAVING")]),s._v(" 可以在相同的查询中。")])]),s._v(" "),a("li",[a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("HAVING")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("vs")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("WHERE")]),s._v(" 和 "),a("code",[s._v("HAVING")]),s._v(" 都是用于过滤。")]),s._v(" "),a("li",[a("code",[s._v("HAVING")]),s._v(" 适用于汇总的组记录；而 WHERE 适用于单个记录。")])])])]),s._v(" "),a("p",[a("strong",[s._v("使用 WHERE 和 HAVING 过滤数据")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" cust_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" num\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" Customers\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" cust_email "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" cust_name\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("HAVING")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("hr"),s._v(" "),a("p",[a("em",[s._v("（以下为 DDL 语句用法）")])]),s._v(" "),a("h2",{attrs:{id:"七、数据定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#七、数据定义"}},[s._v("#")]),s._v(" 七、数据定义")]),s._v(" "),a("blockquote",[a("p",[s._v("DDL 的主要功能是定义数据库对象（如：数据库、数据表、视图、索引等）。")])]),s._v(" "),a("h3",{attrs:{id:"数据库-database"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库-database"}},[s._v("#")]),s._v(" 数据库（DATABASE）")]),s._v(" "),a("h4",{attrs:{id:"创建数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建数据库"}},[s._v("#")]),s._v(" 创建数据库")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATABASE")]),s._v(" test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"删除数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除数据库"}},[s._v("#")]),s._v(" 删除数据库")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATABASE")]),s._v(" test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"选择数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选择数据库"}},[s._v("#")]),s._v(" 选择数据库")]),s._v(" "),a("div",{staticClass:"language-stata line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-stata"}},[a("code",[a("span",{pre:!0,attrs:{class:"token command keyword"}},[s._v("USE")]),s._v(" test;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"数据表-table"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据表-table"}},[s._v("#")]),s._v(" 数据表（TABLE）")]),s._v(" "),a("h4",{attrs:{id:"创建数据表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建数据表"}},[s._v("#")]),s._v(" 创建数据表")]),s._v(" "),a("p",[a("strong",[s._v("普通创建")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unsigned")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  username "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'default'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'用户名'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'default'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'密码'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  email "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'default'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'邮箱'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'用户表'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[s._v("根据已有的表创建新表")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" vip_user "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"删除数据表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除数据表"}},[s._v("#")]),s._v(" 删除数据表")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"修改数据表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改数据表"}},[s._v("#")]),s._v(" 修改数据表")]),s._v(" "),a("p",[a("strong",[s._v("添加列")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" age "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("删除列")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COLUMN")]),s._v(" age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("修改列")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("MODIFY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COLUMN")]),s._v(" age "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tinyint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("添加主键")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("删除主键")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"视图-view"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视图-view"}},[s._v("#")]),s._v(" 视图（VIEW）")]),s._v(" "),a("blockquote",[a("ul",[a("li",[s._v("定义\n"),a("ul",[a("li",[s._v("视图是基于  语句的结果集的可视化的表。")]),s._v(" "),a("li",[s._v("视图是虚拟的表，本身不包含数据，也就不能对其进行索引操作。对视图的操作和对普通表的操作一样。")])])]),s._v(" "),a("li",[s._v("作用\n"),a("ul",[a("li",[s._v("简化复杂的  操作，比如复杂的联结；")]),s._v(" "),a("li",[s._v("只使用实际表的一部分数据；")]),s._v(" "),a("li",[s._v("通过只给用户访问视图的权限，保证数据的安全性；")]),s._v(" "),a("li",[s._v("更改数据格式和表示。")])])])])]),s._v(" "),a("h4",{attrs:{id:"创建视图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建视图"}},[s._v("#")]),s._v(" 创建视图")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VIEW")]),s._v(" top_10_user_view "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" username\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"删除视图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除视图"}},[s._v("#")]),s._v(" 删除视图")]),s._v(" "),a("div",{staticClass:"language-gauss line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("DROP VIEW top_10_user_view;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"索引-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#索引-index"}},[s._v("#")]),s._v(" 索引（INDEX）")]),s._v(" "),a("blockquote",[a("ul",[a("li",[s._v("作用\n"),a("ul",[a("li",[s._v("通过索引可以更加快速高效地查询数据。")]),s._v(" "),a("li",[s._v("用户无法看到索引，它们只能被用来加速查询。")])])]),s._v(" "),a("li",[s._v("注意\n"),a("ul",[a("li",[s._v("更新一个包含索引的表需要比更新一个没有索引的表花费更多的时间，这是由于索引本身也需要更新。因此，理想的做法是仅仅在常常被搜索的列（以及表）上面创建索引。")])])]),s._v(" "),a("li",[s._v("唯一索引\n"),a("ul",[a("li",[s._v("唯一索引表明此索引的每一个索引值只对应唯一的数据记录。")])])])])]),s._v(" "),a("h4",{attrs:{id:"创建索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建索引"}},[s._v("#")]),s._v(" 创建索引")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INDEX")]),s._v(" user_index\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"创建唯一索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建唯一索引"}},[s._v("#")]),s._v(" 创建唯一索引")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNIQUE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INDEX")]),s._v(" user_index\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"删除索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除索引"}},[s._v("#")]),s._v(" 删除索引")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INDEX")]),s._v(" user_index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"约束"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#约束"}},[s._v("#")]),s._v(" 约束")]),s._v(" "),a("blockquote",[a("p",[s._v("约束用于规定表中的数据规则。")])]),s._v(" "),a("ul",[a("li",[s._v("如果存在违反约束的数据行为，行为会被约束终止。")]),s._v(" "),a("li",[s._v("约束可以在创建表时规定（通过 CREATE TABLE 语句），或者在表创建之后规定（通过 ALTER TABLE 语句）。")]),s._v(" "),a("li",[s._v("约束类型\n"),a("ul",[a("li",[a("code",[s._v("NOT NULL")]),s._v(" - 指示某列不能存储 NULL 值。")]),s._v(" "),a("li",[a("code",[s._v("UNIQUE")]),s._v(" - 保证某列的每行必须有唯一的值。")]),s._v(" "),a("li",[a("code",[s._v("PRIMARY KEY")]),s._v(" - NOT NULL 和 UNIQUE 的结合。确保某列（或两个列多个列的结合）有唯一标识，有助于更容易更快速地找到表中的一个特定的记录。")]),s._v(" "),a("li",[a("code",[s._v("FOREIGN KEY")]),s._v(" - 保证一个表中的数据匹配另一个表中的值的参照完整性。")]),s._v(" "),a("li",[a("code",[s._v("CHECK")]),s._v(" - 保证列中的值符合指定的条件。")]),s._v(" "),a("li",[a("code",[s._v("DEFAULT")]),s._v(" - 规定没有给列赋值时的默认值。")])])])]),s._v(" "),a("p",[s._v("创建表时使用约束条件：")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" Users "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  Id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNSIGNED")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'自增Id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  Username "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNIQUE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'default'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'用户名'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  Password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'default'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'密码'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  Email "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'default'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'邮箱地址'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  Enabled "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TINYINT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'是否有效'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARSET")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8mb4 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'用户表'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("hr"),s._v(" "),a("p",[a("em",[s._v("（以下为 TCL 语句用法）")])]),s._v(" "),a("h2",{attrs:{id:"八、事务处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#八、事务处理"}},[s._v("#")]),s._v(" 八、事务处理")]),s._v(" "),a("blockquote",[a("ul",[a("li",[s._v("不能回退 SELECT 语句，回退 SELECT 语句也没意义；也不能回退 CREATE 和 DROP 语句。")]),s._v(" "),a("li",[a("strong",[s._v("My 默认是隐式提交")]),s._v("，每执行一条语句就把这条语句当成一个事务然后进行提交。当出现 "),a("code",[s._v("START TRANSACTION")]),s._v(" 语句时，会关闭隐式提交；当 "),a("code",[s._v("COMMIT")]),s._v(" 或 "),a("code",[s._v("ROLLBACK")]),s._v(" 语句执行后，事务会自动关闭，重新恢复隐式提交。")]),s._v(" "),a("li",[s._v("通过 "),a("code",[s._v("set autocommit=0")]),s._v(" 可以取消自动提交，直到 "),a("code",[s._v("set autocommit=1")]),s._v(" 才会提交；autocommit 标记是针对每个连接而不是针对服务器的。")]),s._v(" "),a("li",[s._v("指令\n"),a("ul",[a("li",[a("code",[s._v("START TRANSACTION")]),s._v(" - 指令用于标记事务的起始点。")]),s._v(" "),a("li",[a("code",[s._v("SAVEPOINT")]),s._v(" - 指令用于创建保留点。")]),s._v(" "),a("li",[a("code",[s._v("ROLLBACK TO")]),s._v(" - 指令用于回滚到指定的保留点；如果没有设置保留点，则回退到 "),a("code",[s._v("START TRANSACTION")]),s._v(" 语句处。")]),s._v(" "),a("li",[a("code",[s._v("COMMIT")]),s._v(" - 提交事务。")])])])])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 开始事务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("START")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRANSACTION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 插入操作 A")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxxx@163.com'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 创建保留点 updateA")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SAVEPOINT")]),s._v(" updateA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 插入操作 B")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxxx@163.com'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 回滚到保留点 updateA")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROLLBACK")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" updateA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 提交事务，只有操作 A 生效")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMIT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("hr"),s._v(" "),a("p",[a("em",[s._v("（以下为 DCL 语句用法）")])]),s._v(" "),a("h2",{attrs:{id:"九、权限控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#九、权限控制"}},[s._v("#")]),s._v(" 九、权限控制")]),s._v(" "),a("blockquote",[a("ul",[a("li",[a("p",[s._v("GRANT 和 REVOKE 可在几个层次上控制访问权限：")]),s._v(" "),a("ul",[a("li",[s._v("整个服务器，使用 GRANT ALL 和 REVOKE ALL；")]),s._v(" "),a("li",[s._v("整个数据库，使用 ON database.*；")]),s._v(" "),a("li",[s._v("特定的表，使用 ON database.table；")]),s._v(" "),a("li",[s._v("特定的列；")]),s._v(" "),a("li",[s._v("特定的存储过程。")])])]),s._v(" "),a("li",[a("p",[s._v("新创建的账户没有任何权限。")])]),s._v(" "),a("li",[a("p",[s._v("账户用 username@host 的形式定义，username@% 使用的是默认主机名。")])]),s._v(" "),a("li",[a("p",[s._v("My 的账户信息保存在 my 这个数据库中。")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USE")]),s._v(" my"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])])]),s._v(" "),a("h3",{attrs:{id:"创建账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建账户"}},[s._v("#")]),s._v(" 创建账户")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" myuser IDENTIFIED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mypassword'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"修改账户名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改账户名"}},[s._v("#")]),s._v(" 修改账户名")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'newuser'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'myuser'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nFLUSH "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"删除账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除账户"}},[s._v("#")]),s._v(" 删除账户")]),s._v(" "),a("div",{staticClass:"language-crmsh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("DROP USER myuser;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"查看权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看权限"}},[s._v("#")]),s._v(" 查看权限")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" GRANTS "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" myuser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"授予权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#授予权限"}},[s._v("#")]),s._v(" 授予权限")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" myuser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"删除权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除权限"}},[s._v("#")]),s._v(" 删除权限")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REVOKE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" myuser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"更改密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更改密码"}},[s._v("#")]),s._v(" 更改密码")]),s._v(" "),a("div",{staticClass:"language-ebnf line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ebnf"}},[a("code",[a("span",{pre:!0,attrs:{class:"token definition rule keyword"}},[s._v("SET PASSWORD FOR myuser")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mypass'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"十、存储过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十、存储过程"}},[s._v("#")]),s._v(" 十、存储过程")]),s._v(" "),a("blockquote",[a("ul",[a("li",[s._v("存储过程可以看成是对一系列  操作的批处理；")]),s._v(" "),a("li",[s._v("使用存储过程的好处\n"),a("ul",[a("li",[s._v("代码封装，保证了一定的安全性；")]),s._v(" "),a("li",[s._v("代码复用；")]),s._v(" "),a("li",[s._v("由于是预先编译，因此具有很高的性能。")])])]),s._v(" "),a("li",[s._v("创建存储过程\n"),a("ul",[a("li",[s._v("命令行中创建存储过程需要自定义分隔符，因为命令行是以 "),a("code",[s._v(";")]),s._v(" 为结束符，而存储过程中也包含了分号，因此会错误把这部分分号当成是结束符，造成语法错误。")]),s._v(" "),a("li",[s._v("包含 in、out 和 inout 三种参数。")]),s._v(" "),a("li",[s._v("给变量赋值都需要用 select into 语句。")]),s._v(" "),a("li",[s._v("每次只能给一个变量赋值，不支持集合的操作。")])])])])]),s._v(" "),a("h3",{attrs:{id:"创建存储过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建存储过程"}},[s._v("#")]),s._v(" 创建存储过程")]),s._v(" "),a("div",{staticClass:"language-oxygene line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("DROP PROCEDURE IF EXISTS `proc_adder`;\nDELIMITER ;;\nCREATE DEFINER=`root`@`localhost` PROCEDURE `proc_adder`(IN a int, IN b int, OUT sum int)\nBEGIN\n    DECLARE c int;\n    if a is null then set a = 0;\n    end if;\n\n    if b is null then set b = 0;\n    end if;\n\n    set sum  = a + b;\nEND\n;;\nDELIMITER ;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("h3",{attrs:{id:"使用存储过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用存储过程"}},[s._v("#")]),s._v(" 使用存储过程")]),s._v(" "),a("div",{staticClass:"language-nginx line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("nginxset")]),s._v(" @b=5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("call")]),s._v(" proc_adder(2,@b,@s)")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" @s as sum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"十一、游标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十一、游标"}},[s._v("#")]),s._v(" 十一、游标")]),s._v(" "),a("blockquote",[a("ul",[a("li",[s._v("游标（cursor）是一个存储在 DBMS 服务器上的数据库查询，它不是一条 SELECT 语句，而是被该语句检索出来的结果集。")]),s._v(" "),a("li",[s._v("在存储过程中使用游标可以对一个结果集进行移动遍历。")]),s._v(" "),a("li",[s._v("游标主要用于交互式应用，其中用户需要对数据集中的任意行进行浏览和修改。")]),s._v(" "),a("li",[s._v("使用游标的四个步骤：\n"),a("ul",[a("li",[s._v("声明游标，这个过程没有实际检索出数据；")]),s._v(" "),a("li",[s._v("打开游标；")]),s._v(" "),a("li",[s._v("取出数据；")]),s._v(" "),a("li",[s._v("关闭游标；")])])])])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" $\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" getTotal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" total "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 创建接收游标数据的变量")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" sid "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" sname "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 创建总数变量")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" sage "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 创建结束标志变量")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" done "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 创建游标")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" cur "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURSOR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("age "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" cursor_table "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" age"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 指定游标循环结束时的返回值")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CONTINUE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("HANDLER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" FOUND "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" done "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" total "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OPEN")]),s._v(" cur"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FETCH")]),s._v(" cur "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" sid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHILE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DO")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" total "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" total "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FETCH")]),s._v(" cur "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" sid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHILE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CLOSE")]),s._v(" cur"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" total"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" $\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 调用存储过程")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("call")]),s._v(" getTotal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br")])]),a("h2",{attrs:{id:"十二、触发器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十二、触发器"}},[s._v("#")]),s._v(" 十二、触发器")]),s._v(" "),a("blockquote",[a("p",[s._v("触发器是一种与表操作有关的数据库对象，当触发器所在表上出现指定事件时，将调用该对象，即表的操作事件触发表上的触发器的执行。")])]),s._v(" "),a("p",[s._v("可以使用触发器来进行审计跟踪，把修改记录到另外一张表中。")]),s._v(" "),a("p",[s._v("My 不允许在触发器中使用 CALL 语句 ，也就是不能调用存储过程。")]),s._v(" "),a("p",[a("strong",[a("code",[s._v("BEGIN")]),s._v(" 和 "),a("code",[s._v("END")])])]),s._v(" "),a("p",[s._v("当触发器的触发条件满足时，将会执行 "),a("code",[s._v("BEGIN")]),s._v(" 和 "),a("code",[s._v("END")]),s._v(" 之间的触发器执行动作。")]),s._v(" "),a("blockquote",[a("p",[s._v("🔔 注意：在 My 中，分号 "),a("code",[s._v(";")]),s._v(" 是语句结束的标识符，遇到分号表示该段语句已经结束，My 可以开始执行了。因此，解释器遇到触发器执行动作中的分号后就开始执行，然后会报错，因为没有找到和 BEGIN 匹配的 END。")]),s._v(" "),a("p",[s._v("这时就会用到 "),a("code",[s._v("DELIMITER")]),s._v(" 命令（DELIMITER 是定界符，分隔符的意思）。它是一条命令，不需要语句结束标识，语法为："),a("code",[s._v("DELIMITER new_delemiter")]),s._v("。"),a("code",[s._v("new_delemiter")]),s._v(" 可以设为 1 个或多个长度的符号，默认的是分号 "),a("code",[s._v(";")]),s._v("，我们可以把它修改为其他符号，如 "),a("code",[s._v("$")]),s._v(" - "),a("code",[s._v("DELIMITER $")]),s._v(" 。在这之后的语句，以分号结束，解释器不会有什么反应，只有遇到了 "),a("code",[s._v("$")]),s._v("，才认为是语句结束。注意，使用完之后，我们还应该记得把它给修改回来。")])]),s._v(" "),a("p",[a("strong",[a("code",[s._v("NEW")]),s._v(" 和 "),a("code",[s._v("OLD")])])]),s._v(" "),a("ul",[a("li",[s._v("My 中定义了 "),a("code",[s._v("NEW")]),s._v(" 和 "),a("code",[s._v("OLD")]),s._v(" 关键字，用来表示触发器的所在表中，触发了触发器的那一行数据。")]),s._v(" "),a("li",[s._v("在 "),a("code",[s._v("INSERT")]),s._v(" 型触发器中，"),a("code",[s._v("NEW")]),s._v(" 用来表示将要（"),a("code",[s._v("BEFORE")]),s._v("）或已经（"),a("code",[s._v("AFTER")]),s._v("）插入的新数据；")]),s._v(" "),a("li",[s._v("在 "),a("code",[s._v("UPDATE")]),s._v(" 型触发器中，"),a("code",[s._v("OLD")]),s._v(" 用来表示将要或已经被修改的原数据，"),a("code",[s._v("NEW")]),s._v(" 用来表示将要或已经修改为的新数据；")]),s._v(" "),a("li",[s._v("在 "),a("code",[s._v("DELETE")]),s._v(" 型触发器中，"),a("code",[s._v("OLD")]),s._v(" 用来表示将要或已经被删除的原数据；")]),s._v(" "),a("li",[s._v("使用方法："),a("code",[s._v("NEW.columnName")]),s._v("（columnName 为相应数据表某一列名）")])]),s._v(" "),a("h3",{attrs:{id:"创建触发器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建触发器"}},[s._v("#")]),s._v(" 创建触发器")]),s._v(" "),a("blockquote",[a("p",[s._v("提示：为了理解触发器的要点，有必要先了解一下创建触发器的指令。")])]),s._v(" "),a("p",[a("code",[s._v("CREATE TRIGGER")]),s._v(" 指令用于创建触发器。")]),s._v(" "),a("p",[s._v("语法：")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" trigger_name\ntrigger_time\ntrigger_event\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" table_name\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR EACH ROW")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n  trigger_statements\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("说明：")]),s._v(" "),a("ul",[a("li",[s._v("trigger_name：触发器名")]),s._v(" "),a("li",[s._v("trigger_time: 触发器的触发时机。取值为 "),a("code",[s._v("BEFORE")]),s._v(" 或 "),a("code",[s._v("AFTER")]),s._v("。")]),s._v(" "),a("li",[s._v("trigger_event: 触发器的监听事件。取值为 "),a("code",[s._v("INSERT")]),s._v("、"),a("code",[s._v("UPDATE")]),s._v(" 或 "),a("code",[s._v("DELETE")]),s._v("。")]),s._v(" "),a("li",[s._v("table_name: 触发器的监听目标。指定在哪张表上建立触发器。")]),s._v(" "),a("li",[s._v("FOR EACH ROW: 行级监视，My 固定写法，其他 DBMS 不同。")]),s._v(" "),a("li",[s._v("trigger_statements: 触发器执行动作。是一条或多条  语句的列表，列表内的每条语句都必须用分号 "),a("code",[s._v(";")]),s._v(" 来结尾。")])]),s._v(" "),a("p",[s._v("示例：")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" $\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("trigger_insert_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AFTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR EACH ROW")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_history"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" operate_type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" operate_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NEW"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'add a user'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" $\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h3",{attrs:{id:"查看触发器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看触发器"}},[s._v("#")]),s._v(" 查看触发器")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" TRIGGERS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"删除触发器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除触发器"}},[s._v("#")]),s._v(" 删除触发器")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" trigger_insert_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"实际运用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实际运用"}},[s._v("#")]),s._v(" 实际运用")]),s._v(" "),a("h3",{attrs:{id:"实际开发中-为什么要替换和避免-sql-中的-in-查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实际开发中-为什么要替换和避免-sql-中的-in-查询"}},[s._v("#")]),s._v(" 实际开发中，为什么要替换和避免 SQL 中的 IN 查询？")]),s._v(" "),a("p",[s._v("在实际开发中，替换和避免 SQL 中的 IN 查询有以下几个主要原因：")]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("性能问题：")]),s._v(" IN 查询在某些情况下可能会导致性能问题。当 IN 中的值过多时，数据库需要逐个匹配，可能会导致全表扫描，造成性能瓶颈。尤其是当 IN 列表中的值很多，数据库需要不断进行多次查询，增加了数据库的负担。")]),s._v(" "),a("li",[a("strong",[s._v("查询优化问题：")]),s._v(" 数据库优化器在处理 IN 查询时可能会出现问题。不同数据库系统对 IN 查询的优化方式不同，某些情况下可能无法正确优化，导致查询效率下降。")]),s._v(" "),a("li",[a("strong",[s._v("内存占用问题：")]),s._v(" IN 查询中的值需要在内存中进行匹配，当 IN 列表中的值过多时，会占用大量的内存资源，可能导致内存不足的问题。")]),s._v(" "),a("li",[a("strong",[s._v("维护问题：")]),s._v(" 使用 IN 查询时，如果需要修改查询条件中的值，需要手动修改 IN 列表中的值，这在维护过程中可能会引入错误。而且，当需要添加或删除值时，也需要相应地修改查询语句。")])]),s._v(" "),a("p",[s._v("为了避免这些问题，开发中可以考虑以下方法：")]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("使用连接查询：")]),s._v(" 对于 IN 查询，有时可以使用连接查询（JOIN）来代替。连接查询的优化器通常能更好地处理大量数据，并且可以避免 IN 查询的性能问题。")]),s._v(" "),a("li",[a("strong",[s._v("分页查询：")]),s._v(" 如果 IN 查询的目的是为了分页显示数据，可以考虑使用分页查询，将数据分批加载，避免一次性查询过多数据。")]),s._v(" "),a("li",[a("strong",[s._v("使用索引：")]),s._v(" 在 IN 查询中，确保被查询的字段上有适当的索引，以加快查询速度。索引可以帮助数据库快速定位匹配的数据。")]),s._v(" "),a("li",[a("strong",[s._v("使用 EXISTS 或子查询：")]),s._v(" 对于某些情况，可以使用 EXISTS 或子查询来代替 IN 查询。这种方式在某些情况下可能会更加高效。")])]),s._v(" "),a("p",[s._v("总之，在开发中应该根据具体的情况来选择是否使用 IN 查询以及如何优化查询性能。合理地使用连接查询、分页查询、索引等方法，可以避免 IN 查询带来的性能和维护问题。")]),s._v(" "),a("h3",{attrs:{id:"为什么可以用-exists-子查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么可以用-exists-子查询"}},[s._v("#")]),s._v(" 为什么可以用 EXISTS 子查询？")]),s._v(" "),a("p",[a("code",[s._v("EXISTS")]),s._v(" 是一种用于判断子查询结果是否存在的 SQL 关键字。它通常与主查询一起使用，以确定子查询是否返回了任何行。在某些情况下，使用 "),a("code",[s._v("EXISTS")]),s._v(" 可以替代 "),a("code",[s._v("IN")]),s._v(" 查询，具有一些优势：")]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("性能优化：")]),a("code",[s._v("EXISTS")]),s._v(" 查询通常可以通过使用索引等优化手段来提高查询性能。数据库优化器可以更好地处理 "),a("code",[s._v("EXISTS")]),s._v(" 查询，从而避免了一些 "),a("code",[s._v("IN")]),s._v(" 查询可能出现的性能问题。")]),s._v(" "),a("li",[a("strong",[s._v("避免重复数据：")]),a("code",[s._v("IN")]),s._v(" 查询在列表中包含重复值时可能会出现重复的查询结果。而 "),a("code",[s._v("EXISTS")]),s._v(" 查询则不会出现这个问题，它只关心是否存在满足条件的记录，而不考虑具体的记录内容。")]),s._v(" "),a("li",[a("strong",[s._v("适用范围广：")]),a("code",[s._v("EXISTS")]),s._v(" 查询更加灵活，可以用于更多不同的查询场景，包括子查询中的聚合操作、连接查询等。")]),s._v(" "),a("li",[a("strong",[s._v("内存占用更小：")]),a("code",[s._v("EXISTS")]),s._v(" 查询不需要加载全部的列表值到内存中进行匹配，因此在处理大量数据时，内存占用相对较小。")])]),s._v(" "),a("p",[a("em",[s._v("总结")])]),s._v(" "),a("ul",[a("li",[s._v("in 查询是会加载全部列表值，所以性能低")]),s._v(" "),a("li",[s._v("exists 只是会判断列表值是否存在")])]),s._v(" "),a("h2",{attrs:{id:"参考文献"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[s._v("#")]),s._v(" 参考文献")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://javaguide.cn/database/sql/sql-syntax-summary.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("SQL语法基础知识总结)"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/6844903790571700231",target:"_blank",rel:"noopener noreferrer"}},[s._v("SQL 语法速成手册"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.begtut.com/mysql/mysql-tutorial.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("MySQL 教程"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);